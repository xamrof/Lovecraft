/* Paleta Lovecraftiana */
:root {
    --color-bg: #1c1c1e;        /* Muy gris oscuro/casi negro (Abyss) */
    --color-card: transparent;  /* Fondo transparente para el efecto flotante */
    --color-accent: #3C6E71;    /* Verde Lovecraftiano/Verdigrís (Tono Alienígena) */
    --color-text: #e0e0e0;      /* Blanco roto (Pergamino) */
    --color-error: #cc6666;     /* Rojo sangre/Oxidado */
    --chain-color: #555555;     /* Color de metal oscuro para las cadenas */
}

/* Estilos Base */
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: serif;
    background-color: var(--color-bg);
}
#app-container {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    width: 100vw;
    transition: opacity 2s ease-in-out, transform 2s ease-in-out;
}
#video-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #000;
    display: none;
}
#secret-video {
    min-width: 100%;
    min-height: 100%;
    width: auto;
    height: auto;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    object-fit: cover;
    filter: grayscale(100%) brightness(50%);
}
.fade-in {
    animation: fadeIn 3s forwards;
}
@keyframes fadeIn {
    from { opacity: 0; filter: blur(50px); }
    to { opacity: 1; filter: blur(0px); }
}

/* Estilo Minimalista (Transparente) */
#key-input-card {
    background-color: var(--color-card);
    border: none;
    box-shadow: none;
}

/* Estilo del Candado/Botón */
#activate-button {
    width: 80px;
    height: 80px;
    padding: 0;
    border-radius: 50%;
    border: 4px solid var(--chain-color);
    transition: border-color 0.5s, box-shadow 0.5s;
    background-color: transparent;
    position: relative;
    overflow: visible;
    transition: background-color 0.25s, box-shadow 0.25s, transform 0.15s;
}

#activate-button:hover {
    cursor: pointer;
    box-shadow: 0 0 10px var(--chain-color);
    border-color: var(--color-accent);
}

#lock-icon {
    fill: none;
    stroke: var(--color-text);
    transition: stroke 0.5s;
}

.chain-link {
    width: 20px;
    height: 20px;
    fill: var(--chain-color);
    transition: opacity 0.5s, transform 0.5s;
}

/* Hover: iluminar el candado y añadir resplandor (inicia la animación de respiración) */
#activate-button:hover #lock-icon {
    stroke: var(--color-accent);
    filter: drop-shadow(0 0 12px rgba(60,110,113,0.85));
    /* la animación lock-breathe escala suavemente el icono */
    animation: lock-breathe 2.2s ease-in-out infinite both;
}

/* Soporte para focus (accesibilidad con teclado) */
#activate-button:focus-visible #lock-icon {
    stroke: var(--color-accent);
    filter: drop-shadow(0 0 10px rgba(60,110,113,0.7));
}

/* Crear un disco interno oscuro que se ilumina al hacer hover */
#activate-button::before {
    content: "";
    position: absolute;
    inset: 8px; /* deja margen para el borde */
    border-radius: 50%;
    background: rgba(0,0,0,0.6);
    transition: background 0.25s ease, box-shadow 0.25s ease, transform 0.2s ease;
    z-index: 0;
}

#activate-button svg {
    position: relative;
    z-index: 1; /* asegurarse de que el icono esté por encima del disco */
}

#activate-button:hover::before {
    background: radial-gradient(circle at 50% 40%, rgba(60,110,113,0.18), rgba(0,0,0,0.35));
    /* Inicia la animación de respiración en el disco interior */
    animation: breathe 2.2s ease-in-out infinite both;
}

#activate-button:focus-visible::before {
    background: radial-gradient(circle at 50% 40%, rgba(60,110,113,0.14), rgba(0,0,0,0.38));
    box-shadow: 0 0 18px rgba(60,110,113,0.1), inset 0 0 6px rgba(60,110,113,0.05);
}

/* Keyframes: respiración para el disco interior */
@keyframes breathe {
    0% {
        box-shadow: 0 0 8px rgba(60,110,113,0.06), inset 0 0 4px rgba(60,110,113,0.02);
        transform: scale(1);
        background: radial-gradient(circle at 50% 40%, rgba(60,110,113,0.12), rgba(0,0,0,0.48));
    }
    50% {
        box-shadow: 0 0 28px rgba(60,110,113,0.22), inset 0 0 12px rgba(60,110,113,0.08);
        transform: scale(1.06);
        background: radial-gradient(circle at 50% 40%, rgba(60,110,113,0.24), rgba(0,0,0,0.28));
    }
    100% {
        box-shadow: 0 0 8px rgba(60,110,113,0.06), inset 0 0 4px rgba(60,110,113,0.02);
        transform: scale(1);
        background: radial-gradient(circle at 50% 40%, rgba(60,110,113,0.12), rgba(0,0,0,0.48));
    }
}

/* Keyframes: respiración para el icono (ligera escala) */
@keyframes lock-breathe {
    0% { transform: scale(1); }
    50% { transform: scale(1.08); }
    100% { transform: scale(1); }
}

/* Aplicar también animación al focus-visible para accesibilidad */
#activate-button:focus-visible #lock-icon {
    animation: lock-breathe 2.2s ease-in-out infinite both;
}

/* Estilos para el arco (shackle) del candado y la animación de apertura */
#lock-shackle {
    transform-box: fill-box;
    transform-origin: 50% 30%; /* girar desde la parte superior central */
    transition: transform 0.55s cubic-bezier(.2,.9,.3,1), stroke 0.35s ease;
}

/* Clase aplicada por JS cuando se desbloquea; la abrazadera se levanta hacia arriba */
#lock-shackle.unlock {
    transform: translateY(-36%);
}

/* Pequeño movimiento del cuerpo para dar sensación física al abrirse */
#lock-body {
    transition: transform 0.45s ease, fill 0.3s ease;
}
#lock-body.unlock-shift {
    transform: translateY(2%);
}


/* Message area size fix */
#message-area { height: 1.25rem; }

/* Ocultar cursor para modo inmersivo */
.hide-cursor {
    cursor: none !important;
}
